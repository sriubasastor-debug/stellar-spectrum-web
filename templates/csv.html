<!DOCTYPE html>
<html lang="{{ 'zh' if lang == 'zh' else 'en' }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ t('title') if t else '恒星光谱工作台' }}</title>

  <!-- AOS 动画 -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
  <!-- Google font fallback -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* 载入本地中文字体（请确保 static/fonts/NotoSansSC-Regular.otf 已存在） */
    @font-face {
      font-family: "CHN";
      src: url("/static/fonts/NotoSansSC-Regular.otf") format("opentype");
      font-weight: 400;
      font-style: normal;
    }
    :root{
      --bg1:#020617;
      --bg2:#071028;
      --neon:#58a6ff;
      --accent:#7b61ff;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family: "CHN", "Orbitron", sans-serif;color:#e8f4ff}
    body{background:radial-gradient(1200px 600px at 10% 10%, rgba(124,58,237,0.04), transparent 10%), linear-gradient(180deg,var(--bg1),var(--bg2));overflow:hidden}

    /* starfield canvas full screen */
    canvas#starfield{position:fixed;inset:0;z-index:0}

    /* foreground container */
    .wrap{position:relative;z-index:5;max-width:1100px;margin:60px auto;padding:28px}

    .hero{
      display:flex;align-items:center;gap:20px;padding:22px;border-radius:16px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow:0 12px 40px rgba(2,6,23,0.6);backdrop-filter:blur(6px)
    }
    .logo{
      width:96px;height:96px;border-radius:14px;background:linear-gradient(135deg,var(--neon),var(--accent));
      display:flex;align-items:center;justify-content:center;color:white;font-size:38px;box-shadow:0 8px 30px rgba(80,150,255,0.12)
    }
    .meta h1{margin:0;font-size:28px;letter-spacing: -0.5px}
    .meta p{margin:6px 0 0;color:#bcd6ff}

    .actions{margin-top:18px;display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:12px 18px;border-radius:12px;background:linear-gradient(90deg,var(--neon),var(--accent));color:white;text-decoration:none;font-weight:700;box-shadow:0 10px 30px rgba(60,100,230,0.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#bcd6ff}

    .grid{margin-top:26px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(2,6,23,0.5)}
    .card h3{margin:0 0 6px}
    .card p{margin:0;color:#bcd6ff}

    .footer{margin-top:28px;text-align:center;color:#9fb4d9;font-size:13px}

    .lang{position:fixed;right:18px;top:14px;color:#bcd6ff;z-index:10}
    .lang a{color:var(--neon);text-decoration:none;margin-left:10px}
    @media (max-width:640px){.hero{flex-direction:column;align-items:flex-start}.logo{width:70px;height:70px}}
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>

  <div class="lang">
    <a href="/?lang=zh">中文</a> | <a href="/?lang=en">EN</a>
  </div>

  <div class="wrap" data-aos="fade-up">
    <div class="hero" data-aos="zoom-in">
      <div class="logo" id="logo">☆</div>
      <div class="meta">
        <h1>{{ t('title') if t else '恒星光谱工作台' }}</h1>
        <p>{{ '专业 H–R 可视化 · 批量 CSV → PDF 报告 · 单星演化 GIF' if lang=='zh' else 'Professional H–R visualization · Batch CSV → PDF · Single-star evolution GIF' }}</p>

        <div class="actions">
          <a class="btn" href="/single?lang={{lang}}">{{ t('single') if t else '单星分析' }}</a>
          <a class="btn ghost" href="/csv?lang={{lang}}">{{ t('csv') if t else '批量 CSV' }}</a>
          <a class="btn ghost" href="/download_desktop">{{ t('download_desktop') if t else '桌面打包说明' }}</a>
        </div>
      </div>
    </div>

    <div class="grid" data-aos="fade-up" data-aos-delay="80">
      <div class="card">
        <h3>交互式 CSV 预览</h3>
        <p>上传 CSV，页面内搜索/排序，直接生成科研级 PDF 报告。</p>
      </div>
      <div class="card">
        <h3>专业 H–R 图</h3>
        <p>主序带 / 巨星区 / 白矮星区高亮，颜色分类与中文标签。</p>
      </div>
      <div class="card">
        <h3>演化动画</h3>
        <p>单星可生成演化 GIF，演示主序→红巨→白矮等示意轨迹。</p>
      </div>
    </div>

    <div class="footer" data-aos="fade-up" data-aos-delay="160">© 2025 星辰工作台</div>
  </div>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <script>
    // init animations
    AOS.init({duration:700,once:true});

    // logo subtle animation
    gsap.from("#logo",{y:-6,rotation:-6,duration:1.4,repeat:-1,yoyo:true,ease:"sine.inOut"});

    // starfield
    const canvas = document.getElementById('starfield');
    const ctx = canvas.getContext('2d');
    let w,h,stars=[];
    function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight}
    window.addEventListener('resize', resize);
    resize();
    function initStars(){stars=[];for(let i=0;i<400;i++){stars.push({x:Math.random()*w,y:Math.random()*h,z:Math.random()*2+0.3})}}
    initStars();
    function tick(){
      ctx.fillStyle='rgba(0,0,8,0.45)';
      ctx.fillRect(0,0,w,h);
      ctx.shadowBlur=12;ctx.shadowColor='#4ea3ff';
      for(let s of stars){
        ctx.beginPath();ctx.fillStyle='white';ctx.arc(s.x,s.y,s.z,0,Math.PI*2);ctx.fill();
        s.y += s.z*0.3;
        if(s.y>h) s.y=0;
      }
      requestAnimationFrame(tick);
    }
    tick();
  </script>
</body>
</html>
